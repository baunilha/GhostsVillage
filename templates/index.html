{% extends "layout/main.html" %}

{% block styles %}{% endblock %}

{% block body %}

<div class="row">
  
  <!--<img src="../static/img/HomeImg.png"> 

   <div class="span6">
    <iframe width='1280' height='800' frameBorder='0' src='http://a.tiles.mapbox.com/v3/baunilha.map-strc2w0s.html#16/40.73037536921354/-73.99818586960039'></iframe>
    <img src="../static/img/i2.png" style="position: absolute; top: 0; left: 0;"/>
  </div> -->
      
  		<iframe width='1280' height='800' frameBorder='0' src='http://a.tiles.mapbox.com/v3/baunilha.map-strc2w0s.html#16/40.73037536921354/-73.99818586960039' style="position: absolute; top: 0; left: 0;"></iframe>
  		
      <img src="../static/img/layertop.png" style="position: absolute; top: 0; left: 0;"/>

      <div id="video_div" class="span5" style="position: absolute; top: 30px; left: 30px;">
    <!-- message end up  here -->
      </div>

      <!-- <div id="ytapiplayer" class="span5"></div> -->
  		

</div>


{% endblock %}

{% block scripts %}
  <script type="text/javascript" src="/static/js/swfobject.js"></script> 
  <script src="http://js.pusher.com/1.12/pusher.min.js" type="text/javascript"></script>
  <script type="text/javascript">
    // Enable pusher logging - don't include this in production
    Pusher.log = function(message) {
      if (window.console && window.console.log) window.console.log(message);
    };

    // Flash fallback logging - don't include this in production
    WEB_SOCKET_DEBUG = true;

    var pusher = new Pusher('{{ PUSHER_KEY }}');
    var channel = pusher.subscribe('ghost_demo');
    
    channel.bind('incoming_digits', function(data){
      console.log(data);
      
      //display_video(data.msg); //display the new video

      // couch potato example
      // video_id = data.video.video_id;
      //ytplayer.loadVideoById(video_id); // load youtube video 
      
      display_video(data.msg);
    });

  // setup youtube player
    //var params = { allowScriptAccess: "always" };
    
    // var atts = { id: "myytplayer" };
    
    // swfobject.embedSWF("http://www.youtube.com/v/YU3kJBcvPl4?enablejsapi=1&playerapiid=ytplayer&version=3",
                       //"ytapiplayer", "425", "356", "8", null, null, params, atts);
    
    // function onYouTubePlayerReady(playerId) {
    //   ytplayer = document.getElementById("myytplayer");
    // }

  // choosing video function
  function display_video(message) {
    console.dir(message);
    if (message == "1") {
      video = 'hZPXzP4nXWY';
    }
    if (message == "2") {
      video = 'z66jDrc1EQY';
    }
    video_html = '<iframe width="560" height="315" src="http://www.youtube.com/embed/' + video + '?autoplay=1" frameborder="0" allowfullscreen></iframe>';
    jQuery('#video_div').html(video_html);

    //swfobject.embedSWF("http://www.youtube.com/v/YU3kJBcvPl4?enablejsapi=1&playerapiid=video&version=3",
                       //"ytapiplayer", "425", "356", "8", null, null, params);
  }
    

  </script>
  
{% endblock %}

